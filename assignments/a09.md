# Assignment 9

In this assignment, you will design an interactive Twitter-style news feed web app that displays a list of recent tweets and allows users to post new tweets to the feed, update or delete their tweets, retweet or reply to tweets, and like or unlike tweets.

You will not be interacting directly with the real Twitter server; instead, we have created a RESTful back-end API specifically for this course. Your web app should use AJAX + JSON to send requests to this special server. There are 7 RESTful endpoints (aka URLs) that we expose for your app to use. These 7 endpoints are sufficient for implementing the functionality to display, manage, and like tweets. Each one of these endpoints are explained in detail below.

> **Careful! When you post new tweets, they will be visible to the entire class.** This also means that your app's news feed will show all of the tweets recently posted by your classmates.


## 1. Tweet resource

The main RESTful resource that your app must manipulate for a09 is called a Tweet. Each tweet implicitly has the following fields.

```
   name   |   type   |   example   |                description
---------------------------------------------------------------------------------
    id    |  number  |     498     | The unique identification number assigned
          |          |             | to the tweet by the server database.
          |          |             | Automatically set by the server.
---------------------------------------------------------------------------------
   type   |  string  |  "retweet"  | Specifies whether the tweet is a regular
          |          |             | tweet ("tweet"), a reply to another tweet
          |          |             | ("reply"), or a retweet of another tweet
          |          |             | ("retweet")
          |          |             |
          |          |             | Must be one of the following values:
          |          |             |   ["tweet", "retweet", "reply"]
---------------------------------------------------------------------------------
   body   |  string  | "This is    | The body text of the tweet
          |          | the body of |
          |          | the tweet"  |
---------------------------------------------------------------------------------
  parent  |  Tweet   |             | A reference to the original tweet if this
          |          |             | is a reply or a retweet
---------------------------------------------------------------------------------
  isMine  | boolean  |    false    | True if the tweet was created by the
          |          |             | current logged in user
---------------------------------------------------------------------------------
 isLiked  | boolean  |     true    | True if the tweet is liked by the
          |          |             | current logged in user
---------------------------------------------------------------------------------
 retweets |  number  |      0      | The number of retweets for this tweet.
          |          |             | Automatically set by the server.
---------------------------------------------------------------------------------
 likes    |  number  |      1      | The number of likes for this tweet.
          |          |             | Automatically set by the server.
---------------------------------------------------------------------------------
createdAt | timestamp|             | The date and time at which the tweet was
          |          |             | posted. Automatically set by the server.
---------------------------------------------------------------------------------
updatedAt | timestamp|             | The date and time at which the tweet was
          |          |             | last updated. Automatically set by the server.
```


## 2. API Documentation

This section describes the 7 RESTful endpoints (aka URLs) that your app must use (via AJAX + JSON) to interact with the COMP 426 Twitter server.


### 2.1. Index route
```
Purpose:
	Retrieves a list of the most recent tweets as a JSON array
Route:
	GET  https://comp426fa19.cs.unc.edu/a09/tweets
Request Params:
	skip (integer) - Optional. Defaults to 0. Used for pagination. Specifies
	                 the number of tweets to skip before seleting records to
	                 retrieve.
	limit (integer) - Optional. Defaults to 50. Used for pagination. Specifies
	                  the number of tweets to retrieve. Must be in the range
	                  [1, 75].
	sort (string) - Optional. Defaults to "createdAt DESC". Specifies the order
	                of the tweets to retrieve. Must be a tweet field name followed
	                by "ASC" or "DESC" to denote ascending or descending,
	                respectively. If omitted, selects newest tweets first.
	where (json) - Optional. Defaults to an empty object ({}). Specifies a
	               filter to apply to the records before retrieving them.
Response:
	Responds with an array in JSON format containing the selected tweets.
```


### 2.2. Create route
```
Purpose:
	Creates a new tweet in the database
Route:
	POST https://comp426fa19.cs.unc.edu/a09/tweets
Request Params:
	body (string) - Required. The body text of the tweet. Can be up to 280
	                characters in length.
	type (string) - Optional. Defaults to "tweet". Specifies whether the tweet
	                is a regular tweet, a reply to another tweet, or a retweet
	                of another tweet. Must be one of the following values:
	                ["tweet", "retweet", "reply"].
	parent (number) - Optional, but required if type is set to "retweet" or
	                  "reply". Specifies the ID of the associated tweet.
Response:
	Upon successful tweet creation, this route responds with the created
	tweet's field data in JSON format.
```


### 2.3. Read route
```
Purpose:
	Gets details about a specific tweet
Route:
	GET  https://comp426fa19.cs.unc.edu/a09/tweets/:id
Request Params:
	This route does not accept request params, but the ID of the tweet
	that should be retrieved must be specified in the URL.
Response:
	This route responds with details about the tweet's field data in
	JSON format.
```


### 2.4. Update route
```
Purpose:
	Updates a specific tweet
Route:
	PUT  https://comp426fa19.cs.unc.edu/a09/tweets/:id
Request Params:
	body (string) - Required. The body text of the tweet. Can be up to 280
	                characters in length.
Response:
	Upon successful tweet update, this route responds with the updated
	tweet's new field data in JSON format.
```


### 2.5. Destroy route
```
Purpose:
	Permanently deletes a specific tweet
Route:
	DELETE  https://comp426fa19.cs.unc.edu/a09/tweets/:id
Request Params:
	This route does not accept request params, but the ID of the tweet
	that should be deleted must be specified in the URL.
Response:
	Upon successful tweet deletion, this route responds with an empty
	response body.
```


### 2.6. Like route
```
Purpose:
	Likes a specific tweet
Route:
	PUT  https://comp426fa19.cs.unc.edu/a09/tweets/:id/like
Request Params:
	This route does not accept request params, but the ID of the tweet
	that should be liked must be specified in the URL.
Response:
	This route responds with an empty response body.
```


### 2.7. Unlike route
```
Purpose:
	Unlikes a specific tweet
Route:
	PUT  https://comp426fa19.cs.unc.edu/a09/tweets/:id/unlike
Request Params:
	This route does not accept request params, but the ID of the tweet
	that should be unliked must be specified in the URL.
Response:
	This route responds with an empty response body.
```

## 3. Authentication

In order to use the COMP 426 Twitter API, your browser must first be logged in to the COMP 426 server. That's how the system knows which user is creating/updating/liking/deleting tweets.


## 4. Retweets and Replies

When a tweet is first created via the Create route (see Section 2.2), it may be marked on the server as a "retweet" or a "reply." To accomplish this, your app must provide the server with an existing tweet to which the new tweet will refer. This process uses the special `type` and `parent` fields on the Tweet resource, as explained below.


### 4.1. Replying to a tweet


### 4.2. Retweeting a tweet


## 5. Requirements

At a minimum, your app must:

* Retrieve and display a "news feed" containing the 50 most recent tweets. Use the Index route (see Section 2.1) to retrieve the news feed data from the server.

* For each tweet in the news feed, include a clickable button that allows the user to "like" or "unlike" the tweet. Use the Like and Unlike routes (see Sections 2.6 and 2.7) to save the user's action to the server.

* For tweets that were posted by the logged-in user, include a clickable button that allows the user to edit their tweet. When the user clicks this button, create and display an edit form with a `<textarea>` field that is prepopulated with the tweet's current body text. After the user finishes making changes, use the Update route (see Section 2.4) to save the new tweet body text to the server.

* For tweets that were posted by the logged-in user, include a clickable button that allows the user to delete their tweet. When the user clicks this button, use the Destroy route (see Section 2.5) to save the user's action to the server.

* Provide a clickable button that allows the user to post a new tweet. When the user clicks this button, create and display an edit form with a `<textarea>` field to receive the tweet body text. After the user finishes composing the tweet, use the Create route (see Section 2.2) to save the new tweet on the server.


**Extra Credit Opportunities**

* Provide a way for the user to reply to existing tweets (see Section 4.1)
* Provide a way for the user to retweet an existing tweet (see Section 4.2)